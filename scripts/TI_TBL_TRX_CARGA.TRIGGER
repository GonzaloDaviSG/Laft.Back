CREATE OR REPLACE  TRIGGER LAFT.TI_TBL_TRX_CARGA
BEFORE INSERT
   ON LAFT.TBL_TRX_CARGA
   FOR EACH ROW
DECLARE
BEGIN
    IF :NEW.NID IS NULL THEN
        SELECT SEQ_TBL_TRX_CARGA.NEXTVAL
        INTO :NEW.NID
        FROM DUAL;
    END IF;
    
    INSERT INTO LAFT.TBL_HIS_CARGA(NID,DREGISTRO,SUSUARIO,NESTADO,
                            SUSERDB,SUSERPC,SIP,SHOST,DREGHIS,STIPHIS)
    VALUES(:NEW.NID,:NEW.DREGISTRO,:NEW.SUSUARIO,:NEW.NESTADO,
                            SYS_CONTEXT('USERENV','SESSION_USER'),SYS_CONTEXT('USERENV','OS_USER'),SYS_CONTEXT('USERENV','IP_ADDRESS'),SYS_CONTEXT('USERENV','HOST'),SYSDATE  ,'I');
END;